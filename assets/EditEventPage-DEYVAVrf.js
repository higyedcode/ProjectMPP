import{r as e,u as g,E as h,c as m,e as p,f as x,j as u,h as I,L as j,B as w,i as y}from"./index-CFRkiK0b.js";import{E as C}from"./EventForm-BEu1hSbI.js";function D(i,s,r,a,o){if(!s.current||!r.current||!a.current)throw new Error("Input references are null!");if(!s.current.value||!r.current.value||!a.current.value)throw new Error("Empty fields detected!");const l=i.eventId.toString(),c=s.current.value,t=r.current.value,v=a.current.value;return{eventId:l,eventName:c,eventDate:t,eventLocation:v,hostId:o}}function S(){document.title="Edit Event";const i=e.useRef(null),s=e.useRef(null),r=e.useRef(null),a=e.useRef(null),o=g(),l=e.useContext(h),{id:c}=m();console.log(c);let[t,v]=e.useState(new p(0,"",new Date,"")),[d,E]=e.useState(!0);e.useEffect(()=>{x(parseInt(c)).then(n=>{console.log("FOUND: "+n.toString()),v(n),E(!1)}).catch(n=>{console.log(n)})},[c]),e.useEffect(()=>{console.log("CHANGED EVENT: "+t.toString()),!d&&(t||o("/"))},[t]);const f=()=>{try{const n=D(t,s,r,a,l.hostId);y(t.eventId,n).then(()=>{o("/events")}),o("/events")}catch(n){alert(n)}};return d?u.jsx(I,{}):u.jsx(j,{entity:"Events",children:u.jsxs("div",{className:"main-page-container","data-testid":"main-page-container",children:[u.jsx(C,{idInput:i,nameInput:s,dateInput:r,locationInput:a,event:t,"data-testid":"event-form"}),u.jsx(w,{type:"submit",buttonMessage:"Edit event",onclick:f})]})})}export{S as default};
